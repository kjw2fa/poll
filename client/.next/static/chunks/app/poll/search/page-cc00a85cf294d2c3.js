(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{9510:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>n});let a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PollCard_poll",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"options",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PollPermissions",kind:"LinkedField",name:"permissions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"permission_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null}],storageKey:null}],type:"Poll",abstractKey:null}}();a.hash="5857926392bf3158da25774a88a9d2a2";let n=a},12830:(e,r,l)=>{"use strict";l.d(r,{Bc:()=>s,ZI:()=>u,k$:()=>d,m_:()=>o});var a=l(73365),n=l(1521),t=l(82115),i=l(19952);let s=t.Kq,o=t.bL,d=t.l9,u=n.forwardRef((e,r)=>{let{className:l,sideOffset:n=4,...s}=e;return(0,a.jsx)(t.UC,{ref:r,sideOffset:n,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",l),...s})});u.displayName=t.UC.displayName},14469:(e,r,l)=>{"use strict";l.d(r,{p:()=>t});var a=l(73365);l(1521);var n=l(19952);function t(e){let{className:r,type:l="text",...t}=e;return(0,a.jsx)("input",{type:l,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...t})}},17183:(e,r,l)=>{"use strict";l.d(r,{A:()=>n});var a=l(73365);l(1521);let n=e=>{let{children:r}=e;return(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:r})}},17205:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"PollList_polls",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"PollCard_poll"}],type:"Poll",abstractKey:null};a.hash="47b76c5b7aec0111b39ebd5f20fec876";let n=a},19952:(e,r,l)=>{"use strict";l.d(r,{cn:()=>t});var a=l(99783),n=l(5347);function t(){for(var e=arguments.length,r=Array(e),l=0;l<e;l++)r[l]=arguments[l];return(0,n.QP)((0,a.$)(r))}},34716:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>n});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"searchTerm"}],r=[{kind:"Variable",name:"searchTerm",variableName:"searchTerm"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"pageSearchQuery",selections:[{alias:null,args:r,concreteType:"Poll",kind:"LinkedField",name:"searchPolls",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"PollList_polls"}],storageKey:null}],type:"RootQueryType",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"pageSearchQuery",selections:[{alias:null,args:r,concreteType:"Poll",kind:"LinkedField",name:"searchPolls",plural:!0,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"options",plural:!0,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PollPermissions",kind:"LinkedField",name:"permissions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"permission_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null},l],storageKey:null}],storageKey:null}]},params:{cacheID:"b6a249151281cdd2e2ff214f65123891",id:null,metadata:{},name:"pageSearchQuery",operationKind:"query",text:"query pageSearchQuery(\n  $searchTerm: String!\n) {\n  searchPolls(searchTerm: $searchTerm) {\n    ...PollList_polls\n    id\n  }\n}\n\nfragment PollCard_poll on Poll {\n  id\n  title\n  options {\n    id\n    optionText\n  }\n  permissions {\n    permission_type\n    target_id\n    id\n  }\n}\n\nfragment PollList_polls on Poll {\n  id\n  ...PollCard_poll\n}\n"}}}();a.hash="c8d836ca3b47cb6720a8e4f7961d5aa0";let n=a},60709:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>m});var a=l(73365),n=l(1521),t=l(14469),i=l(92547),s=l(17183),o=l(72698);let d=l(34716);var u=l(86468),c=l(68698);let p=e=>{let{searchTerm:r}=e,l=(0,o.useLazyLoadQuery)(d,{searchTerm:r}),{userId:n}=(0,c.A)();return n?(0,a.jsx)(u.A,{polls:l.searchPolls,userId:n}):(0,a.jsx)("div",{children:"Please log in to see poll results."})},m=()=>{let[e,r]=(0,n.useState)(""),[l,o]=(0,n.useState)(null),d=async()=>{o(e)};return(0,a.jsx)(s.A,{children:(0,a.jsxs)("div",{className:"poll-search flex flex-col gap-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Find a Poll"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t.p,{type:"text",value:e,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d()},placeholder:"Enter a poll title"}),(0,a.jsx)(i.$,{onClick:d,children:"Search"})]}),l&&(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(p,{searchTerm:l})})]})})}},68698:(e,r,l)=>{"use strict";l.d(r,{A:()=>s,O:()=>i});var a=l(73365),n=l(1521);let t=(0,n.createContext)(void 0),i=e=>{let{children:r}=e,[l,i]=(0,n.useState)(null),[s,o]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{i(localStorage.getItem("userId")),o(!1)},[]),(0,a.jsx)(t.Provider,{value:{userId:l,loading:s},children:r})},s=()=>{let e=(0,n.useContext)(t);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},86366:(e,r,l)=>{"use strict";l.d(r,{E:()=>s});var a=l(73365);l(1521);var n=l(9395),t=l(19952);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:r,variant:l,...n}=e;return(0,a.jsx)("div",{className:(0,t.cn)(i({variant:l}),r),...n})}},86468:(e,r,l)=>{"use strict";l.d(r,{A:()=>k});var a=l(73365),n=l(1521),t=l(18197),i=l.n(t),s=l(19952);let o=n.forwardRef((e,r)=>{let{className:l,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",l),...n})});o.displayName="Card";let d=n.forwardRef((e,r)=>{let{className:l,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",l),...n})});d.displayName="CardHeader";let u=n.forwardRef((e,r)=>{let{className:l,...n}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",l),...n})});u.displayName="CardTitle";let c=n.forwardRef((e,r)=>{let{className:l,...n}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",l),...n})});c.displayName="CardDescription";let p=n.forwardRef((e,r)=>{let{className:l,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",l),...n})});p.displayName="CardContent";let m=n.forwardRef((e,r)=>{let{className:l,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",l),...n})});m.displayName="CardFooter";var g=l(92547),f=l(86366),x=l(12830),h=l(72698);let v=l(9510),y=e=>{let r=(0,h.useFragment)(v,e.poll),l=r.options,n=l.slice(0,2);return(0,a.jsx)(x.Bc,{children:(0,a.jsxs)(o,{className:"flex flex-col h-full",children:[(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{children:r.title}),(0,a.jsx)(c,{children:"TODO: Add poll description"})]}),(0,a.jsxs)(p,{className:"flex flex-wrap gap-2",children:[n.map((e,r)=>(0,a.jsx)(f.E,{variant:"secondary",children:e.optionText},r)),l.length>2&&(0,a.jsxs)(x.m_,{children:[(0,a.jsx)(x.k$,{asChild:!0,children:(0,a.jsxs)(f.E,{variant:"outline",children:["See all ",l.length," options"]})}),(0,a.jsx)(x.ZI,{children:(0,a.jsx)("div",{className:"flex flex-col gap-1",children:l.map((e,r)=>(0,a.jsx)(f.E,{variant:"secondary",children:e.optionText},r))})})]})]}),(0,a.jsx)("div",{className:"flex-grow"})," ",(0,a.jsx)(m,{children:(0,a.jsx)(i(),{href:"/poll/".concat(r.id),children:(0,a.jsx)(g.$,{variant:"outline",children:"View"})})})]},r.id)})},b=l(17205),k=e=>{let{polls:r,userId:l}=e,n=(0,h.useFragment)(b,r);return(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.length>0?n.map(e=>e&&(0,a.jsx)(y,{poll:e,userId:l},e.id)):(0,a.jsx)("p",{children:"No polls found."})})}},90996:(e,r,l)=>{Promise.resolve().then(l.bind(l,60709))},92547:(e,r,l)=>{"use strict";l.d(r,{$:()=>o});var a=l(73365);l(1521);var n=l(35933),t=l(9395),i=l(19952);let s=(0,t.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",secondary:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:r,variant:l,size:t,asChild:o=!1,...d}=e,u=o?n.DX:"button";return(0,a.jsx)(u,{"data-slot":"button",className:(0,i.cn)(s({variant:l,size:t,className:r})),...d})}}},e=>{e.O(0,[666,197,347,131,358],()=>e(e.s=90996)),_N_E=e.O()}]);