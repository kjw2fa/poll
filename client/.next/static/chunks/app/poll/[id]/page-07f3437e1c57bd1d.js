(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{3605:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>a});let t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"pollId"},l={defaultValue:null,kind:"LocalArgument",name:"ratings"},n={defaultValue:null,kind:"LocalArgument",name:"userId"},t=[{kind:"Variable",name:"pollId",variableName:"pollId"},{kind:"Variable",name:"ratings",variableName:"ratings"},{kind:"Variable",name:"userId",variableName:"userId"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[e,l,n],kind:"Fragment",metadata:null,name:"VoteSubmitVoteMutation",selections:[{alias:null,args:t,concreteType:"Poll",kind:"LinkedField",name:"submitVote",plural:!1,selections:[a,{args:null,kind:"FragmentSpread",name:"PollResults_results"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,n,l],kind:"Operation",name:"VoteSubmitVoteMutation",selections:[{alias:null,args:t,concreteType:"Poll",kind:"LinkedField",name:"submitVote",plural:!1,selections:[a,{alias:null,args:null,concreteType:"Vote",kind:"LinkedField",name:"votes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"VoteRating",kind:"LinkedField",name:"ratings",plural:!0,selections:[{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"option",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null}],storageKey:null},a],storageKey:null}],storageKey:null}]},params:{cacheID:"4463c6829410657d9e1c986e17bba511",id:null,metadata:{},name:"VoteSubmitVoteMutation",operationKind:"mutation",text:"mutation VoteSubmitVoteMutation(\n  $pollId: ID!\n  $userId: ID!\n  $ratings: [VoteRatingInput!]!\n) {\n  submitVote(pollId: $pollId, userId: $userId, ratings: $ratings) {\n    id\n    ...PollResults_results\n  }\n}\n\nfragment PollResults_results on Poll {\n  votes {\n    user {\n      username\n      id\n    }\n    ratings {\n      option {\n        optionText\n        id\n      }\n      rating\n    }\n    id\n  }\n}\n"}}}();t.hash="036958bf2dc07c26f4252d65db98a0e3";let a=t},3899:(e,l,n)=>{Promise.resolve().then(n.bind(n,78e3))},7992:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>a});let t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],l=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"permission_type",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null},r=[n,{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"PollPageQuery",selections:[{alias:null,args:l,concreteType:"Poll",kind:"LinkedField",name:"poll",plural:!1,selections:[n,t,{alias:null,args:null,concreteType:"PollPermissions",kind:"LinkedField",name:"permissions",plural:!0,selections:[a,i],storageKey:null},{args:null,kind:"FragmentSpread",name:"Vote_poll"},{args:null,kind:"FragmentSpread",name:"EditPoll_poll"},{args:null,kind:"FragmentSpread",name:"PollResults_results"}],storageKey:null}],type:"RootQueryType",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"PollPageQuery",selections:[{alias:null,args:l,concreteType:"Poll",kind:"LinkedField",name:"poll",plural:!1,selections:[n,t,{alias:null,args:null,concreteType:"PollPermissions",kind:"LinkedField",name:"permissions",plural:!0,selections:[a,i,n],storageKey:null},{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"options",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"Vote",kind:"LinkedField",name:"votes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VoteRating",kind:"LinkedField",name:"ratings",plural:!0,selections:[{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"option",plural:!1,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null}],storageKey:null},n],storageKey:null}],storageKey:null}]},params:{cacheID:"532c9357f97c55b5a8383080acc146fa",id:null,metadata:{},name:"PollPageQuery",operationKind:"query",text:"query PollPageQuery(\n  $id: ID!\n) {\n  poll(id: $id) {\n    id\n    title\n    permissions {\n      permission_type\n      target_id\n      id\n    }\n    ...Vote_poll\n    ...EditPoll_poll\n    ...PollResults_results\n  }\n}\n\nfragment EditPoll_poll on Poll {\n  id\n  title\n  options {\n    id\n    optionText\n  }\n}\n\nfragment PollResults_results on Poll {\n  votes {\n    user {\n      username\n      id\n    }\n    ratings {\n      option {\n        optionText\n        id\n      }\n      rating\n    }\n    id\n  }\n}\n\nfragment Vote_poll on Poll {\n  id\n  options {\n    id\n    optionText\n  }\n  votes {\n    user {\n      id\n    }\n    ratings {\n      option {\n        id\n      }\n      rating\n    }\n    id\n  }\n}\n"}}}();t.hash="ecb1ef3f4bb654a9f49bf436a39fc985";let a=t},12830:(e,l,n)=>{"use strict";n.d(l,{Bc:()=>s,ZI:()=>u,k$:()=>d,m_:()=>o});var t=n(73365),a=n(1521),i=n(82115),r=n(19952);let s=i.Kq,o=i.bL,d=i.l9,u=a.forwardRef((e,l)=>{let{className:n,sideOffset:a=4,...s}=e;return(0,t.jsx)(i.UC,{ref:l,sideOffset:a,className:(0,r.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...s})});u.displayName=i.UC.displayName},14469:(e,l,n)=>{"use strict";n.d(l,{p:()=>i});var t=n(73365);n(1521);var a=n(19952);function i(e){let{className:l,type:n="text",...i}=e;return(0,t.jsx)("input",{type:n,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",l),...i})}},19952:(e,l,n)=>{"use strict";n.d(l,{cn:()=>i});var t=n(99783),a=n(5347);function i(){for(var e=arguments.length,l=Array(e),n=0;n<e;n++)l[n]=arguments[n];return(0,a.QP)((0,t.$)(l))}},24075:(e,l,n)=>{"use strict";n.d(l,{A:()=>u});var t=n(73365),a=n(1521),i=n(14469),r=n(92547),s=n(29155),o=n(48158),d=n(12830);let u=e=>{let{poll:l,onSubmit:n}=e,[u,c]=(0,a.useState)(""),[p,g]=(0,a.useState)([]),[m,x]=(0,a.useState)("");(0,a.useEffect)(()=>{l&&(c(l.title),g(l.options))},[l]);let f=()=>{""!==m.trim()&&p.length<100&&(g([...p,{id:"",optionText:m.trim()}]),x(""))};return(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),p.length<2)return void o.oR.error("A poll must have at least two options.");n({title:u,options:p})},className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,t.jsx)(s.J,{htmlFor:"title",children:"Title"}),(0,t.jsx)(i.p,{type:"text",id:"title",value:u,onChange:e=>c(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,t.jsx)(s.J,{htmlFor:"new-option",children:"Add Option"}),(0,t.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,t.jsx)(i.p,{type:"text",id:"new-option",value:m,onChange:e=>{x(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f())},className:"w-full"}),(0,t.jsx)(r.$,{type:"button",onClick:f,children:"Add Option"})]})]}),(0,t.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,t.jsx)(s.J,{children:"Options"}),0===p.length?(0,t.jsx)("p",{className:"text-muted-foreground",children:"No options added yet. Add some options above."}):p.map((e,l)=>{let n=!!e.id,a=(0,t.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,t.jsx)(i.p,{type:"text",value:e.optionText,onChange:e=>((e,l)=>{let n=[...p];n[e]={...n[e],optionText:l.target.value},g(n)})(l,e),disabled:n}),(0,t.jsx)(r.$,{type:"button",variant:"destructive",onClick:()=>(e=>{let l=[...p];l.splice(e,1),g(l)})(l),disabled:n,children:"X"})]});return n?(0,t.jsxs)(d.m_,{children:[(0,t.jsx)(d.k$,{asChild:!0,children:a}),(0,t.jsx)(d.ZI,{children:(0,t.jsx)("p",{children:"Existing options cannot be edited or removed."})})]},l):(0,t.jsx)("div",{children:a},l)})]}),(0,t.jsx)(r.$,{type:"submit",children:l?"Save Changes":"Create Poll"})]})}},24300:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>a});let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l=[e];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Vote_poll",selections:[e,{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"options",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Vote",kind:"LinkedField",name:"votes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"VoteRating",kind:"LinkedField",name:"ratings",plural:!0,selections:[{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"option",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null}],storageKey:null}],storageKey:null}],type:"Poll",abstractKey:null}}();t.hash="1dfa4e6bcc67bf3f8f903d131b7c424b";let a=t},25219:(e,l,n)=>{"use strict";n.d(l,{Xi:()=>o,av:()=>d,j7:()=>s,tU:()=>r});var t=n(73365);n(1521);var a=n(26936),i=n(19952);function r(e){let{className:l,...n}=e;return(0,t.jsx)(a.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",l),...n})}function s(e){let{className:l,...n}=e;return(0,t.jsx)(a.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 items-center justify-center rounded-lg p-[3px]",l),...n})}function o(e){let{className:l,...n}=e;return(0,t.jsx)(a.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",l),...n})}function d(e){let{className:l,...n}=e;return(0,t.jsx)(a.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",l),...n})}},29155:(e,l,n)=>{"use strict";n.d(l,{J:()=>r});var t=n(73365);n(1521);var a=n(59731),i=n(19952);function r(e){let{className:l,...n}=e;return(0,t.jsx)(a.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",l),...n})}},31273:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>a});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PollResults_results",selections:[{alias:null,args:null,concreteType:"Vote",kind:"LinkedField",name:"votes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VoteRating",kind:"LinkedField",name:"ratings",plural:!0,selections:[{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"option",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null}],storageKey:null}],storageKey:null}],type:"Poll",abstractKey:null};t.hash="7c0c6b2b1625b6a64492caabed22c2bf";let a=t},68698:(e,l,n)=>{"use strict";n.d(l,{A:()=>s,O:()=>r});var t=n(73365),a=n(1521);let i=(0,a.createContext)(void 0),r=e=>{let{children:l}=e,[n,r]=(0,a.useState)(null),[s,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{r(localStorage.getItem("userId")),o(!1)},[]),(0,t.jsx)(i.Provider,{value:{userId:n,loading:s},children:l})},s=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},68846:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>a});let t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditPoll_poll",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"options",plural:!0,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null}],storageKey:null}],type:"Poll",abstractKey:null}}();t.hash="75ed20feba37038264386f01f4b2cda3";let a=t},78e3:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>T});var t=n(73365),a=n(1521),i=n(1702),r=n(25219),s=n(72698),o=n(85638);let d=n(7992);var u=n(92763),c=n(48158);let p=e=>{let{id:l,children:n}=e,{attributes:a,listeners:i,setNodeRef:r,transform:s}=(0,u.PM)({id:l}),o=s?{transform:"translate3d(".concat(s.x,"px, ").concat(s.y,"px, 0)")}:{};return(0,t.jsx)("div",{ref:r,style:o,...a,...i,children:n})},g=e=>{let{id:l,children:n}=e,{isOver:a,setNodeRef:i}=(0,u.zM)({id:l});return(0,t.jsx)("td",{ref:i,style:{backgroundColor:a?"#f0f0f0":void 0},className:"border border-gray-300 p-2",children:n})};var m=n(86366);let x=n(3605),f=n(24300),b=e=>{let{userId:l,poll:n}=e,i=(0,s.useFragment)(f,n),r=(0,a.useMemo)(()=>{var e;let n=new Map,t=null==(e=i.votes)?void 0:e.find(e=>{var n;return(null==e||null==(n=e.user)?void 0:n.id)===l});return t&&t.ratings.forEach(e=>{let l=i.options.find(l=>l.id===e.option.id);l&&n.set(l,e.rating)}),n},[i,l]),[o,d]=(0,a.useState)(r),[b]=(0,s.useMutation)(x);if(!i)return(0,t.jsx)("div",{children:"Loading..."});let v=e=>(0,t.jsx)(p,{id:e.id,children:(0,t.jsx)(m.E,{variant:"outline",children:e.optionText})},e.id),y=new Set(o.keys());return(0,t.jsxs)("div",{className:"vote",children:[(0,t.jsx)(u.Mp,{onDragEnd:e=>{let{active:l,over:n}=e;if(!n)return;let t=l.id,a=i.options.find(e=>e.id===t);a&&d(e=>{let l=new Map(e);if(n){let e=parseInt(n.id,10);l.set(a,e)}else l.delete(a);return l})},children:(0,t.jsxs)("div",{className:"flex justify-center gap-16 max-w-screen-md mx-auto",children:[(0,t.jsx)("div",{className:"w-2/3",children:(0,t.jsxs)("table",{className:"border-collapse border border-gray-300 w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("th",{colSpan:2,className:"border border-gray-300 p-2 text-center",children:"Your Ratings"})})}),(0,t.jsx)("tbody",{children:[10,9,8,7,6,5,4,3,2,1].map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-gray-300 p-2 w-16 text-center",children:e}),(0,t.jsx)(g,{id:String(e),children:Array.from(o.keys()).filter(l=>o.get(l)===e).map(v)})]},e))})]})}),(0,t.jsxs)("div",{className:"w-1/3 bg-blue-100 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Available Options"}),i.options.filter(e=>!y.has(e)).map(v)]})]})}),(0,t.jsx)("div",{className:"flex justify-center mt-4",children:(0,t.jsx)("button",{onClick:()=>{let e=Array.from(o.entries()).map(e=>{let[l,n]=e;return{optionId:l.id,rating:n}});b({variables:{pollId:i.id,userId:l,ratings:e},onCompleted:()=>{c.oR.success("Votes submitted successfully!")},onError:e=>{console.error(e),c.oR.error(e.message||"Error submitting vote.")}})},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Submit"})})]})},v=n(31273),y=e=>{let{poll:l}=e,n=(0,s.useFragment)(v,l);if(!n)return(0,t.jsx)("div",{children:"Loading results..."});let a=new Set(n.votes.map(e=>e.user.username)),i={};n.votes.forEach(e=>{e.ratings.forEach(e=>{i[e.option.optionText]||(i[e.option.optionText]=[]),i[e.option.optionText].push(e.rating)})});let r=Object.entries(i).map(e=>{let[l,n]=e;return{option:l,averageRating:n.reduce((e,l)=>e+l,0)/n.length}});return r.sort((e,l)=>l.averageRating-e.averageRating),(0,t.jsxs)("div",{className:"poll-results flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"mb-6 text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Results"}),(0,t.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Option"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Average Rating"})]})}),(0,t.jsx)("tbody",{children:r.map((e,l)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.option}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.averageRating.toFixed(2)})]},l))})]})]}),(0,t.jsxs)("div",{className:"mb-6 text-center",children:[(0,t.jsxs)("h2",{className:"text-2xl font-semibold mb-2",children:["Voters (",a.size,")"]}),Array.from(a).length>0?(0,t.jsx)("ul",{children:Array.from(a).map((e,l)=>(0,t.jsx)("li",{children:(0,t.jsx)("strong",{children:e})},l))}):(0,t.jsx)("p",{children:"No named votes cast yet."})]})]})};var h=n(24075);let k=n(96803),j=n(68846),F=e=>{let{poll:l,userId:n}=e,a=(0,s.useFragment)(j,l),[i]=(0,s.useMutation)(k);return n?(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsx)(h.A,{onSubmit:e=>{i({variables:{pollId:a.id,userId:n,title:e.title,options:e.options.map(e=>({id:e.id,optionText:e.optionText}))},onCompleted:()=>{c.oR.success("Poll updated successfully!")},onError:e=>{c.oR.error(e.message||"Error updating poll.")}})},poll:a})}):(0,t.jsx)("div",{children:"Loading user..."})};var K=n(68698),P=n(88525);let N=e=>{var l;let{id:n}=e,a=(0,s.useLazyLoadQuery)(d,{id:n}),o=(0,i.useRouter)(),u=(0,i.useSearchParams)().get("tab")||"vote",{userId:c,loading:p}=(0,K.A)(),g=a.poll;if(!g)return(0,t.jsx)("div",{children:"Poll not found"});if(p)return(0,t.jsx)("div",{children:"Loading..."});let m=!!c&&(null==(l=g.permissions)?void 0:l.some(e=>"EDIT"===e.permission_type&&e.target_id===c));return(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:g.title}),(0,t.jsx)(r.tU,{value:u,onValueChange:e=>{o.push("/poll/".concat(n,"?tab=").concat(e))},children:(0,t.jsxs)(r.j7,{className:"w-full p-2 rounded-md bg-gray-100",children:[(0,t.jsx)(r.Xi,{value:"vote",children:"Vote"}),(0,t.jsx)(r.Xi,{value:"results",children:"Results"}),m&&(0,t.jsx)(r.Xi,{value:"edit",children:"Edit"})]})}),"vote"===u&&!c&&(0,t.jsx)(P.A,{featureName:"vote on this poll"}),"vote"===u&&c&&(0,t.jsx)(b,{poll:g,userId:c}),"results"===u&&(0,t.jsx)(y,{poll:g}),"edit"===u&&!m&&(0,t.jsx)("div",{className:"text-center p-4",children:"You do not have permission to edit this poll."}),"edit"===u&&m&&c&&(0,t.jsx)(F,{poll:g,userId:c})]})},T=()=>{let e=(0,i.useParams)().id;return(0,t.jsx)(o.tH,{fallback:(0,t.jsx)("div",{children:"Something went wrong"}),children:(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:e?(0,t.jsx)(N,{id:e}):(0,t.jsx)("div",{children:"No poll ID provided"})})})}},86366:(e,l,n)=>{"use strict";n.d(l,{E:()=>s});var t=n(73365);n(1521);var a=n(9395),i=n(19952);let r=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:l,variant:n,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)(r({variant:n}),l),...a})}},88525:(e,l,n)=>{"use strict";n.d(l,{A:()=>a});var t=n(73365);n(1521);let a=e=>{let{featureName:l}=e;return(0,t.jsxs)("div",{className:"text-center p-8 border rounded-lg bg-gray-50",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Login Required"}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-2",children:["You must be logged in to ",l,"."]})]})}},92547:(e,l,n)=>{"use strict";n.d(l,{$:()=>o});var t=n(73365);n(1521);var a=n(35933),i=n(9395),r=n(19952);let s=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",secondary:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:l,variant:n,size:i,asChild:o=!1,...d}=e,u=o?a.DX:"button";return(0,t.jsx)(u,{"data-slot":"button",className:(0,r.cn)(s({variant:n,size:i,className:l})),...d})}},96803:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>a});let t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"options"},l={defaultValue:null,kind:"LocalArgument",name:"pollId"},n={defaultValue:null,kind:"LocalArgument",name:"title"},t={defaultValue:null,kind:"LocalArgument",name:"userId"},a=[{kind:"Variable",name:"options",variableName:"options"},{kind:"Variable",name:"pollId",variableName:"pollId"},{kind:"Variable",name:"title",variableName:"title"},{kind:"Variable",name:"userId",variableName:"userId"}],i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s={alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"options",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"optionText",storageKey:null}],storageKey:null},o=[i];return{fragment:{argumentDefinitions:[e,l,n,t],kind:"Fragment",metadata:null,name:"EditPollMutation",selections:[{alias:null,args:a,concreteType:"Poll",kind:"LinkedField",name:"editPoll",plural:!1,selections:[i,r,s,{args:null,kind:"FragmentSpread",name:"Vote_poll"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,t,n,e],kind:"Operation",name:"EditPollMutation",selections:[{alias:null,args:a,concreteType:"Poll",kind:"LinkedField",name:"editPoll",plural:!1,selections:[i,r,s,{alias:null,args:null,concreteType:"Vote",kind:"LinkedField",name:"votes",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"VoteRating",kind:"LinkedField",name:"ratings",plural:!0,selections:[{alias:null,args:null,concreteType:"PollOption",kind:"LinkedField",name:"option",plural:!1,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null}],storageKey:null},i],storageKey:null}],storageKey:null}]},params:{cacheID:"0e5382465b85290d9118d73cf6277bae",id:null,metadata:{},name:"EditPollMutation",operationKind:"mutation",text:"mutation EditPollMutation(\n  $pollId: ID!\n  $userId: ID!\n  $title: String!\n  $options: [PollOptionEditInput!]!\n) {\n  editPoll(pollId: $pollId, userId: $userId, title: $title, options: $options) {\n    id\n    title\n    options {\n      id\n      optionText\n    }\n    ...Vote_poll\n  }\n}\n\nfragment Vote_poll on Poll {\n  id\n  options {\n    id\n    optionText\n  }\n  votes {\n    user {\n      id\n    }\n    ratings {\n      option {\n        id\n      }\n      rating\n    }\n    id\n  }\n}\n"}}}();t.hash="c178a9d50cc5659a1f0580b6ca1f7e9e";let a=t}},e=>{e.O(0,[666,833,729,413,347,131,358],()=>e(e.s=3899)),_N_E=e.O()}]);